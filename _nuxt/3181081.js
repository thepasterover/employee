(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{499:function(e,t,r){var content=r(501);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(15).default)("eac2e80c",content,!0,{sourceMap:!1})},500:function(e,t,r){"use strict";r(499)},501:function(e,t,r){var n=r(14)(!1);n.push([e.i,".v-text-field .v-input__control .v-input__slot:before{border-style:none}",""]),e.exports=n},504:function(e,t,r){"use strict";r.r(t);var n=r(24),o=r(1),l=(r(68),r(52),r(45),r(27),r(31),r(303),r(16),r(23),r(69),r(8),r(5),r(7),r(10),r(4),r(11),r(139));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={middleware:"auth",head:function(){return{title:"Profile"}},data:function(){return{isChanged:!1,snackbar:!1,snackbarColor:"#73cfa6",message:null,file:null,avatar:this.$auth.$state.user.employee.avatar?this.$auth.$state.user.employee.avatar.url:"/public/images/avatars/default.jpg",joinedDate:this.$moment(this.$auth.user.employee.date).format("MMM Do YYYY"),designation:this.$auth.user.employee.desg,firstName:this.$auth.$state.user.employee.name.split(" ")[0].trim(),lastName:this.$auth.$state.user.employee.name.split(" ")[1].trim(),email:this.$auth.$state.user.employee.email,phone:this.$auth.$state.user.employee.phone?this.$auth.$state.user.employee.phone:"",address:this.$auth.$state.user.employee.address?this.$auth.$state.user.employee.address:"",city:this.$auth.$state.user.employee.city?this.$auth.$state.user.employee.city:"",state:this.$auth.$state.user.employee.state?this.$auth.$state.user.employee.state:"",zip:this.$auth.$state.user.employee.zip?this.$auth.$state.user.employee.zip:"",rules:{required:function(e){return!!e||"Required Field"},nameMax:function(e){return(e||"").length<=20||"Max 20 characters"},email:function(e){return/\S+@\S+\.\S+/.test(e)||"Enter a valid email!"},emailMax:function(e){return(e||"").length<=50||"Max 50 characters"},number:function(e){return!!Number.isInteger(Number(e))&&Number(e)>0||"Enter a valid Phone Number"},maxPhone:function(e){return e.toString().length<=10||"Max 10 Characters"},minPhone:function(e){return e.toString().length>=10||"Min 10 Characters"},addMax:function(e){return(e||"").length<=30||"Max 30 characters"},zipMax:function(e){return e.toString().length<=6||"Max 6 Characters"},zipMin:function(e){return e.toString().length>=6||"Min 6 Characters"}}}},methods:m(m({},Object(l.b)({setTimeInterval:"timer/setTimeInterval"})),{},{updateProfile:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.$refs.form.validate()){t.next=8;break}return t.next=4,e.$axios.$post("employee/profile/update",{name:e.firstName+" "+e.lastName,phone:e.phone,address:e.address,city:e.city.trim(),state:e.state.trim(),zip:e.zip});case 4:data=t.sent,e.message=data.message,e.snackbarColor="#73cfa6",e.snackbar=!0;case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0.response?(e.message=t.t0.response.data.error,e.snackbarColor="error",e.snackbar=!0):console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},uploadProfile:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.file=e.$refs.profile.files[0],(r=new FormData).append("file",e.file),t.next=6,e.$axios.$post("employee/profile/changeavatar",r);case 6:data=t.sent,e.message=data.message,e.snackbarColor="#73cfa6",e.snackbar=!0,e.avatar=data.avatar,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),t.t0.response?(e.message=t.t0.response.data.error,e.snackbarColor="error",e.snackbar=!0):console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},resetPassword:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$post("employee/profile/resetpassword",{email:e.email,cooldown:e.clickedFlag});case 3:data=t.sent,e.message=data.message,e.snackbarColor="appmainblue",e.snackbar=!0,e.setTimeInterval(2),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0.response?(e.message=t.t0.response.data.error,e.snackbarColor="error",e.snackbar=!0):console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}),computed:m({},Object(l.c)({seconds:function(e){return e.timer.seconds},minutes:function(e){return e.timer.minutes},clickedFlag:function(e){return e.timer.clicked}}))},f=(r(500),r(36)),v=r(39),h=r.n(v),x=r(140),k=r(225),y=r(492),$=r(497),w=r(489),_=r(167),C=r(178),M=r(490),j=r(491),O=r(104),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-container",[r("v-snackbar",{attrs:{timeout:4e3,color:e.snackbarColor,top:"",elevation:"0",app:""},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-icon",e._b({attrs:{color:"white",size:"23"},on:{click:function(t){e.snackbar=!1}}},"v-icon",n,!1),[e._v("\n          mdi-close-circle\n      ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.message)+"\n    ")]),e._v(" "),r("h3",[e._v("My Account")]),e._v(" "),r("v-row",{staticClass:"mt-2 pa-2",attrs:{justify:"space-around","align-content":"space-around"}},[r("v-col",{staticClass:"mb-6",attrs:{cols:"12",md:"4",sm:"5"}},[r("v-card",{attrs:{shaped:"",width:"200",flat:"",outlined:""}},[r("v-img",{attrs:{src:"https://employeesys.herokuapp.com"+e.avatar,height:"200",width:"200",contain:""}})],1),e._v(" "),r("v-btn",{staticClass:"white--text text-capitalize mt-2 mx-auto",attrs:{color:"appmainblue",depressed:""},on:{click:function(t){return e.$refs.profile.click()}}},[r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"profile",attrs:{type:"file",id:"file",accept:"image/*"},on:{change:e.uploadProfile}}),e._v("\n        Change Avatar\n      ")])],1),e._v(" "),r("v-col",{staticClass:"mx-auto",attrs:{"align-self":"center"}},[r("v-form",{ref:"form"},[r("v-row",{staticClass:"mb-n3"},[r("v-col",[r("v-text-field",{attrs:{label:"Joined Date",color:"appmainblue",flat:"",readonly:""},model:{value:e.joinedDate,callback:function(t){e.joinedDate=t},expression:"joinedDate"}})],1),e._v(" "),r("v-col",[r("v-text-field",{attrs:{label:"Designation",color:"appmainblue",readonly:""},model:{value:e.designation,callback:function(t){e.designation=t},expression:"designation"}})],1)],1),e._v(" "),r("v-text-field",{attrs:{label:"Email",color:"appmainblue",readonly:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}},[e._v("\n        Email\n        ")]),e._v(" "),r("v-row",[r("v-col",[r("h3",{staticClass:"my-1 "},[e._v("Update")])])],1),e._v(" "),r("v-row",[r("v-col",[r("v-text-field",{attrs:{label:"First Name",color:"appmainblue",flat:"",rules:[e.rules.required,e.rules.nameMax]},on:{change:function(t){e.isChanged=!0}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}})],1),e._v(" "),r("v-col",[r("v-text-field",{attrs:{label:"Last Name",color:"appmainblue",rules:[e.rules.required,e.rules.nameMax]},on:{change:function(t){e.isChanged=!0}},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})],1)],1),e._v(" "),r("v-text-field",{attrs:{label:"Phone No.",color:"appmainblue",rules:[e.rules.required,e.rules.number,e.rules.minPhone,e.rules.maxPhone],prefix:"+91"},on:{change:function(t){e.isChanged=!0}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),r("v-row",[r("v-col",[r("v-text-field",{attrs:{label:"Address",color:"appmainblue",rules:[e.rules.required,e.rules.addMax]},on:{change:function(t){e.isChanged=!0}},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),e._v(" "),r("v-col",[r("v-text-field",{attrs:{label:"City",color:"appmainblue",rules:[e.rules.required,e.rules.nameMax]},on:{change:function(t){e.isChanged=!0}},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1)],1),e._v(" "),r("v-row",[r("v-col",[r("v-text-field",{attrs:{label:"State",color:"appmainblue",rules:[e.rules.required,e.rules.nameMax]},on:{change:function(t){e.isChanged=!0}},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),e._v(" "),r("v-col",[r("v-text-field",{attrs:{label:"Zip",color:"appmainblue",rules:[e.rules.required,e.rules.zipMax,e.rules.zipMin]},on:{change:function(t){e.isChanged=!0}},model:{value:e.zip,callback:function(t){e.zip=t},expression:"zip"}})],1)],1),e._v(" "),r("v-row",[r("v-col",[r("v-btn",{staticClass:"white--text mt-2",attrs:{color:"appmainblue",depressed:"",disabled:!e.isChanged},on:{click:e.updateProfile}},[e._v("\n            \n              Save\n            ")])],1),e._v(" "),r("v-col",{staticClass:"mt-2"},[r("v-btn",{staticClass:"error--text text-capitalize subtitle-1",attrs:{depressed:"",disabled:e.clickedFlag},on:{click:e.resetPassword}},[e._v("\n              Reset Password\n              ")]),e._v(" "),e.clickedFlag?r("p",{staticClass:"error--text caption ml-1"},[e._v("Resend Email in  "+e._s(e.minutes)+" Minutes "+e._s(e.seconds)+" secs")]):e._e()],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;h()(component,{VBtn:x.a,VCard:k.a,VCol:y.a,VContainer:$.a,VForm:w.a,VIcon:_.a,VImg:C.a,VRow:M.a,VSnackbar:j.a,VTextField:O.a})}}]);